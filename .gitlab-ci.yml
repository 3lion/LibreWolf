image: ubuntu:18.04

stages:
  - Linux-Build
  - Release

Build Linux Packages:
    stage: Linux-Build
    script:
        - cd browser/linux
        - ./build.sh
    artifacts:
        paths:
            - "LibreWolf.tar.bz2"
            - "LibreWolf.AppImage"
            - "librewolf-flatpak-repo"
            - "LibreWolf.flatpak"

Release to Gitlab:
  stage: Release
  image: python3
  script:
    - pip3 install gitlab-release
    - gitlab-release LibreWolf.tar.bz2 LibreWolf.AppImage librewolf-flatpak-repo LibreWolf.flatpak
  only:
    - tags
